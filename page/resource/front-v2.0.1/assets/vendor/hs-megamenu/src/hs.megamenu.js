(function(f){function h(a,c,b,e){var d=this;this.$element=a;this.menu=c;this.options=b;this.$container=e;Object.defineProperties(this,{itemClass:{get:function(){return d.options.type==="mega-menu"?d.options.classMap.hasMegaMenu:d.options.classMap.hasSubMenu}},activeItemClass:{get:function(){return d.options.type==="mega-menu"?d.options.classMap.hasMegaMenuActive:d.options.classMap.hasSubMenuActive}},menuClass:{get:function(){return d.options.type==="mega-menu"?d.options.classMap.megaMenu:d.options.classMap.subMenu}},
isOpened:{get:function(){return this.$element.hasClass(this.activeItemClass.slice(1))}}});this.menu.addClass("animated").on("click.HSMegaMenu",function(){d._updateMenuBounds()});this.$element.data("max-width")&&this.menu.css("max-width",this.$element.data("max-width"));this.$element.data("position")&&this.menu.addClass("hs-position-"+this.$element.data("position"));if(this.options.animationOut)this.menu.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(a){d.menu.hasClass(d.options.animationOut)&&
(d.$element.removeClass(d.activeItemClass.slice(1)),d.options.afterClose.call(d,d.$element,d.menu));d.menu.hasClass(d.options.animationIn)&&d.options.afterOpen.call(d,d.$element,d.menu);a.stopPropagation();a.preventDefault()})}function i(){return"ontouchstart"in window}var g=window.MegaMenu||{},g=function(){function a(c,b){var e=this;this.$element=f(c);this.options=f.extend(!0,{},a.defaults,b);this._items=f();Object.defineProperties(this,{itemsSelector:{get:function(){return e.options.classMap.hasSubMenu+
","+e.options.classMap.hasMegaMenu}},_tempChain:{value:null,writable:!0},state:{value:null,writable:!0}});this.initialize()}return a}();g.defaults={event:"hover",direction:"horizontal",breakpoint:991,animationIn:!1,animationOut:!1,rtl:!1,hideTimeOut:300,sideBarRatio:0.25,pageContainer:f("body"),classMap:{initialized:".hs-menu-initialized",mobileState:".hs-mobile-state",subMenu:".hs-sub-menu",hasSubMenu:".hs-has-sub-menu",hasSubMenuActive:".hs-sub-menu-opened",megaMenu:".hs-mega-menu",hasMegaMenu:".hs-has-mega-menu",
hasMegaMenuActive:".hs-mega-menu-opened"},mobileSpeed:400,mobileEasing:"linear",beforeOpen:function(){},beforeClose:function(){},afterOpen:function(){},afterClose:function(){}};g.prototype.initialize=function(){var a=this,c=f(window);this.options.rtl&&this.$element.addClass("hs-rtl");this.$element.addClass(this.options.classMap.initialized.slice(1)).addClass("hs-menu-"+this.options.direction);c.on("resize.HSMegaMenu",function(){a.resizeTimeOutId&&clearTimeout(a.resizeTimeOutId);a.resizeTimeOutId=
setTimeout(function(){window.innerWidth<=a.options.breakpoint&&a.state=="desktop"?a.initMobileBehavior():window.innerWidth>a.options.breakpoint&&a.state=="mobile"&&a.initDesktopBehavior();a.refresh()},50)});f(document).on("click.HSMegaMenu",function(b){var c=f(b.target).parents(a.itemsSelector);a.closeAll(c.add(f(b.target)))}).on("keyup.HSMegaMenu",function(b){b.keyCode&&b.keyCode===27&&(a.closeAll(),isMenuOpened=!1)});window.innerWidth<=this.options.breakpoint?this.initMobileBehavior():window.innerWidth>
this.options.breakpoint&&this.initDesktopBehavior();this.smartPositions();return this};g.prototype.smartPositions=function(){var a=this;this.$element.find(this.options.classMap.subMenu).each(function(c,b){h.smartPosition(f(b),a.options)})};g.prototype.bindEvents=function(){var a=this;if(this.options.event==="hover"&&!i())this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(c){var b=
f(this),e=b.parents(a.itemsSelector);b.data("HSMenuItem")||a.initMenuItem(b,a.getType(b));e=e.add(b);a.closeAll(e);e.each(function(a,b){var c=f(b).data("HSMenuItem");c.hideTimeOutId&&clearTimeout(c.hideTimeOutId);c.desktopShow()});a._items=a._items.not(e);a._tempChain=e;c.preventDefault();c.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(c){var b=f(this).data("HSMenuItem"),
e=f(c.relatedTarget).parents(a.itemsSelector);b.hideTimeOutId=setTimeout(function(){a.closeAll(e)},a.options.hideTimeOut);a._items=a._items.add(a._tempChain);a._tempChain=null;c.preventDefault();c.stopPropagation()}).on("click.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="click"] > a, '+this.options.classMap.hasSubMenu+'[data-event="click"] > a',function(c){var b=f(this).parent('[data-event="click"]');b.data("HSMenuItem")||a.initMenuItem(b,a.getType(b));a.closeAll(b.add(b.parents(a.itemsSelector)));
b=b.data("HSMenuItem");b.isOpened?b.desktopHide():b.desktopShow();c.preventDefault();c.stopPropagation()});else if(this.$element.on("click.HSMegaMenu",i()?this.options.classMap.hasMegaMenu+" > a, "+this.options.classMap.hasSubMenu+" > a":this.options.classMap.hasMegaMenu+':not([data-event="hover"]) > a,'+this.options.classMap.hasSubMenu+':not([data-event="hover"]) > a',function(c){var b=f(this).parent();b.parents(a.itemsSelector);b.data("HSMenuItem")||a.initMenuItem(b,a.getType(b));a.closeAll(b.add(b.parents(a.itemsSelector)));
b=b.addClass("hs-event-prevented").data("HSMenuItem");b.isOpened?b.desktopHide():b.desktopShow();c.preventDefault();c.stopPropagation()}),!i())this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(c){var b=f(this),e=b.parents(a.itemsSelector);b.data("HSMenuItem")||a.initMenuItem(b,a.getType(b));a.closeAll(b.add(e));e.add(b).each(function(a,b){var c=f(b).data("HSMenuItem");c.hideTimeOutId&&
clearTimeout(c.hideTimeOutId);c.desktopShow()});c.preventDefault();c.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(c){f(this).data("HSMenuItem").hideTimeOutId=setTimeout(function(){a.closeAll(f(c.relatedTarget).parents(a.itemsSelector))},a.options.hideTimeOut);c.preventDefault();c.stopPropagation()});this.$element.on("keydown.HSMegaMenu",this.options.classMap.hasMegaMenu+" > a,"+
this.options.classMap.hasSubMenu+" > a",function(c){var b=f(this),e=b.parent(),d;e.data("HSMenuItem")||a.initMenuItem(e,a.getType(e));d=e.data("HSMenuItem");b.is(":focus")&&(c.keyCode&&c.keyCode===40&&(c.preventDefault(),d.desktopShow(),isMenuOpened=!0),c.keyCode&&c.keyCode===13&&(isMenuOpened===!0?(d.desktopHide(),isMenuOpened=!1):(d.desktopShow(),isMenuOpened=!0)));b.on("focusout",function(){isMenuOpened=!1});d.menu.find("a").on("focusout",function(){setTimeout(function(){d.menu.find("a").is(":focus")||
(d.desktopHide(),isMenuOpened=!1)})})})};g.prototype.initMenuItem=function(a,c){var b=new h(a,a.children(this.options.classMap[c==="mega-menu"?"megaMenu":"subMenu"]),f.extend(!0,{type:c},this.options,a.data()),this.$element);a.data("HSMenuItem",b);this._items=this._items.add(a)};g.prototype.initMobileBehavior=function(){var a=this;this.state="mobile";this.$element.off(".HSMegaMenu").addClass(this.options.classMap.mobileState.slice(1)).on("click.HSMegaMenu",a.options.classMap.hasSubMenu+" > a, "+a.options.classMap.hasMegaMenu+
" > a",function(c){var b=f(this).parent();b.data("HSMenuItem")||a.initMenuItem(b,a.getType(b));a.closeAll(b.parents(a.itemsSelector).add(b));b=b.data("HSMenuItem");b.isOpened?b.mobileHide():b.mobileShow();c.preventDefault();c.stopPropagation()}).find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide()};g.prototype.initDesktopBehavior=function(){this.state="desktop";
this.$element.removeClass(this.options.classMap.mobileState.slice(1)).off(".HSMegaMenu").find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide();this.bindEvents()};g.prototype.closeAll=function(a){var c=this;return this._items.not(a&&a.length?a:f()).each(function(a,e){f(e).removeClass("hs-event-prevented").data("HSMenuItem")[c.state==="mobile"?"mobileHide":"desktopHide"]()})};
g.prototype.getType=function(a){return!a||!a.length?null:a.hasClass(this.options.classMap.hasSubMenu.slice(1))?"sub-menu":a.hasClass(this.options.classMap.hasMegaMenu.slice(1))?"mega-menu":null};g.prototype.getState=function(){return this.state};g.prototype.refresh=function(){return this._items.add(this._tempChain).each(function(a,c){f(c).data("HSMenuItem")._updateMenuBounds()})};h.prototype.desktopShow=function(){if(!this.menu.length)return this;this.$element.addClass(this.activeItemClass.slice(1));
this.options.direction=="horizontal"&&this.smartPosition(this.menu,this.options);this._updateMenuBounds();this.options.animationOut?this.menu.removeClass(this.options.animationOut):this.options.afterOpen.call(this,this.$element,this.menu);this.options.animationIn&&this.menu.addClass(this.options.animationIn);return this};h.prototype.desktopHide=function(){if(!this.menu.length)return this;this.options.animationOut||this.$element.removeClass(this.activeItemClass.slice(1));this.options.animationIn&&
this.menu.removeClass(this.options.animationIn);this.options.animationOut?this.menu.addClass(this.options.animationOut):this.options.afterClose.call(this,this.$element,this.menu);return this};h.prototype.mobileShow=function(){var a=this;if(!this.menu.length)return this;this.menu.removeClass(this.options.animationIn).removeClass(this.options.animationOut).stop().slideDown({duration:a.options.mobileSpeed,easing:a.options.mobileEasing,complete:function(){a.options.afterOpen.call(a,a.$element,a.menu)}});
this.$element.addClass(this.activeItemClass.slice(1));return this};h.prototype.mobileHide=function(){var a=this;if(!this.menu.length)return this;this.menu.stop().slideUp({duration:a.options.mobileSpeed,easing:a.options.mobileEasing,complete:function(){a.options.afterClose.call(a,a.$element,a.menu)}});this.$element.removeClass(this.activeItemClass.slice(1));return this};h.prototype.smartPosition=function(a,c){h.smartPosition(a,c)};h.smartPosition=function(a,c){if(a||a.length)f(window),a.removeClass("hs-reversed"),
c.rtl?a.offset().left<0&&a.addClass("hs-reversed"):a.offset().left+a.outerWidth()>window.innerWidth&&a.addClass("hs-reversed")};h.prototype._updateMenuBounds=function(){var a="auto";if(this.options.direction=="vertical"&&this.options.type=="mega-menu"){if(this.$container&&this.$container.data("HSMegaMenu").getState()=="desktop"){if(!this.options.pageContainer.length)this.options.pageContainer=f("body");a=this.options.pageContainer.outerWidth()*(1-this.options.sideBarRatio)}else a="auto";this.menu.css({width:a,
height:"auto"});this.menu.outerHeight()>this.$container.outerHeight()||this.menu.css("height","100%")}};f.fn.HSMegaMenu=function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),b=this.length,e,d;for(e=0;e<b;e++)if(typeof a=="object"||typeof a=="undefined"?this[e].MegaMenu=new g(this[e],a):d=this[e].MegaMenu[a].apply(this[e].MegaMenu,c),typeof d!="undefined")return d;return this}})(jQuery);