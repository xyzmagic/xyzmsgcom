(function(b){function k(a,d){if(!a.length)return!1;this.element=a;this.config=d;this.target=b(this.element.data("unfold-target"));this.allInvokers=b('[data-unfold-target="'+this.element.data("unfold-target")+'"]');this.toggle=function(){if(!this.target.length)return this;this.defaultState?this.show():this.hide();return this};this.smartPosition=function(c){c.data("baseDirection")&&c.css(c.data("baseDirection").direction,c.data("baseDirection").value);c.removeClass("u-unfold--reverse-y");var a=b(window),
e=getComputedStyle(c.get(0)),d=Math.abs(parseInt(e.left,10))<40?"left":"right",j=c.offset();d==="right"?(c.data("baseDirection")||c.data("baseDirection",{direction:"right",value:parseInt(e.right,10)}),j.left<0&&c.css("right",(parseInt(c.css("right"),10)-(j.left-10))*-1)):(c.data("baseDirection")||c.data("baseDirection",{direction:"left",value:parseInt(e.left,10)}),j.left+c.outerWidth()>a.width()&&c.css("left",parseInt(c.css("left"),10)-(j.left+c.outerWidth()+10-a.width())));j.top+c.outerHeight()-
a.scrollTop()>a.height()&&c.addClass("u-unfold--reverse-y")};this.getOption=function(c){return this.config[c]?this.config[c]:null};return!0}function l(b,d){k.call(this,b,d)&&(Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}),this.target.addClass("u-unfold--simple"),this.hide())}function m(b,d){if(k.call(this,b,d)){var c=this;this.target.addClass("u-unfold--css-animation u-unfold--hidden").css("animation-duration",c.config.unfoldDuration+"ms");
Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}});if(this.target.length)this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(b){c.target.hasClass(c.config.unfoldAnimationOut)&&(c.target.removeClass(c.config.unfoldAnimationOut).addClass("u-unfold--hidden"),c.allInvokers.length&&c.allInvokers.attr("aria-expanded","false"),c.config.afterClose.call(c.target,c.element));c.target.hasClass(c.config.unfoldAnimationIn)&&
(c.allInvokers.length&&c.allInvokers.attr("aria-expanded","true"),c.config.afterOpen.call(c.target,c.element));b.preventDefault();b.stopPropagation()})}}function n(b,d){k.call(this,b,d)&&(this.target.addClass("u-unfold--jquery-slide u-unfold--hidden").hide(),Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}))}b.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:"click",unfoldType:"simple",unfoldDuration:300,unfoldEasing:"linear",unfoldAnimationIn:"fadeIn",
unfoldAnimationOut:"fadeOut",unfoldHideOnScroll:!0,unfoldHideOnBlur:!1,unfoldDelay:350,afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},_pageCollection:b(),init:function(a,d){var c;if(a&&a.length){c=this;var i;a.each(function(a,e){var f=b(e),h;if(!f.data("HSUnfold")){h=d&&b.isPlainObject(d)?b.extend(!0,{},c._baseConfig,d,f.data()):b.extend(!0,{},c._baseConfig,f.data());switch(h.unfoldType){case "css-animation":f.data("HSUnfold",new m(f,h));break;case "jquery-slide":f.data("HSUnfold",
new n(f,h));break;default:f.data("HSUnfold",new l(f,h))}c._pageCollection=c._pageCollection.add(f);c._bindEvents(f,h.unfoldEvent,h.unfoldDelay);h=b(e).data("HSUnfold");i=b(h.target).find("input, textarea").length;b(h.target).find("[data-unfold-target]").length&&f.addClass("target-of-invoker-has-unfolds")}});var e,g=0;b(document).on("keydown.HSUnfold",function(a){a.keyCode&&a.keyCode===27&&c._pageCollection.each(function(a,f){var d=window.innerWidth,g=Boolean(b(f).data("is-mobile-only"));e=b(b(b(f).data("unfold-target")).children());
g?g&&d<769&&b(f).data("HSUnfold").hide():b(f).data("HSUnfold").hide();b(f).data("HSUnfold").config.beforeClose.call(c.target,c.element)});c._pageCollection.each(function(c,a){b(b(a).data("unfold-target")).hasClass("u-unfold--hidden")||(e=b(b(b(a).data("unfold-target")).children()))});(a.keyCode&&a.keyCode===38||a.keyCode&&a.keyCode===40)&&a.preventDefault();a.keyCode&&a.keyCode===38&&g>0&&g--;a.keyCode&&a.keyCode===40&&g<e.length-1&&g++;g<0&&(g=0);(a.keyCode&&a.keyCode===38||a.keyCode&&a.keyCode===
40)&&b(e[g]).focus()});b(window).on("click",function(){c._pageCollection.each(function(a,e){var f=window.innerWidth,d=Boolean(b(e).data("is-mobile-only"));d?d&&f<769&&b(e).data("HSUnfold").hide():b(e).data("HSUnfold").hide();b(e).data("HSUnfold").config.beforeClose.call(c.target,c.element)})});c._pageCollection.each(function(c,a){var e=b(a).data("HSUnfold").config.unfoldTarget;b(e).on("click",function(b){b.stopPropagation()})});b(window).on("scroll.HSUnfold",function(){c._pageCollection.each(function(c,
a){var e=b(a).data("HSUnfold");e.getOption("unfoldHideOnScroll")&&i===0?e.hide():e.getOption("unfoldHideOnScroll")&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&e.hide()})});b(window).on("resize.HSUnfold",function(){c._resizeTimeOutId&&clearTimeout(c._resizeTimeOutId);c._resizeTimeOutId=setTimeout(function(){c._pageCollection.each(function(c,a){var e=b(a).data("HSUnfold");e.smartPosition(e.target)})},50)});return a}},_bindEvents:function(a,d,c){var i=b(a.data("unfold-target"));if(d==="hover"&&
!("ontouchstart"in window)){if(a.on("mouseenter.HSUnfold",function(){var a=b(this).data("HSUnfold");a&&(a.unfoldTimeOut&&clearTimeout(a.unfoldTimeOut),a.show())}).on("mouseleave.HSUnfold",function(){var a=b(this).data("HSUnfold");if(a)a.unfoldTimeOut=setTimeout(function(){a.hide()},c)}),i.length)i.on("mouseenter.HSUnfold",function(){var b=a.data("HSUnfold");b.unfoldTimeOut&&clearTimeout(b.unfoldTimeOut);b.show()}).on("mouseleave.HSUnfold",function(){var b=a.data("HSUnfold");b.unfoldTimeOut=setTimeout(function(){b.hide()},
c)})}else a.on("click.HSUnfold",function(a){var c=b(this),d=b("[data-unfold-target].active:not(.target-of-invoker-has-unfolds)"),i=b("[data-unfold-target].active.target-of-invoker-has-unfolds");c.data("HSUnfold")&&(c.hasClass("target-of-invoker-has-unfolds")?i.length&&i.data("HSUnfold").toggle():d.length&&d.data("HSUnfold").toggle(),c.data("HSUnfold").toggle(),b(b(c.data("unfold-target")).children()[0]).trigger("focus"),a.stopPropagation(),a.preventDefault())})}};l.prototype.show=function(){var a=
b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+a+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden");this.allInvokers.length&&this.allInvokers.attr("aria-expanded","true");this.config.afterOpen.call(this.target,this.element);return this};l.prototype.hide=function(){var a=b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+a+'"]').removeClass("active");this.target.addClass("u-unfold--hidden");this.allInvokers.length&&this.allInvokers.attr("aria-expanded",
"false");this.config.afterClose.call(this.target,this.element);return this};m.prototype.show=function(){var a=b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+a+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden").removeClass(this.config.unfoldAnimationOut).addClass(this.config.unfoldAnimationIn)};m.prototype.hide=function(){var a=b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+a+'"]').removeClass("active");this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)};
n.prototype.show=function(){var a=this,d=b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+d+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden").stop().slideDown({duration:a.config.unfoldDuration,easing:a.config.unfoldEasing,complete:function(){a.config.afterOpen.call(a.target,a.element)}})};n.prototype.hide=function(){var a=this,d=b(this)[0].config.unfoldTarget;b('[data-unfold-target="'+d+'"]').removeClass("active");this.target.slideUp({duration:a.config.unfoldDuration,
easing:a.config.unfoldEasing,complete:function(){a.config.afterClose.call(a.target,a.element);a.target.addClass("u-unfold--hidden")}})}})(jQuery);