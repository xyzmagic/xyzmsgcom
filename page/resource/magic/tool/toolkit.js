'use strict';function initCopyButton(){$("[name\x3d'copyBtn']").click(function(){var b=this,d=$(b).attr("id"),e=new Clipboard("#"+d,{});e.on("success",function(a){var c=$(a.trigger);c.attr("data-tip")?$.bootstrapGrowl("\u5df2\u590d\u5236\u94fe\u63a5\u3002",{type:"info",align:"center",delay:1E3}):(c.tooltip("show"),setTimeout(function(a){c.tooltip("hide")},500))});e.on("error",function(a){$(b).tooltip("hide")});setTimeout(function(a){e.destroy()},1E3)})}
function refreshVi(b,d){$(b).attr("src","vi?vct\x3d"+d+"\x26d\x3d"+(new Date).getTime())}function initLoginModal(){$.HSCore.components.HSValidation.init("#loginForm",{rules:{username:"required",password:"required",vc:{required:!0,minlength:4,maxlength:4}},submitHandler:function(b){loginFromModal("loginForm")}});document.onkeydown=function(){"13"==event.keyCode&&$("#loginBtnInModal").trigger("click")}}
function loginFromModal(b){$("#messageTip").text("");var d=$("#"+b+" #username");if(d){var e=d.val();e=$.trim(e);d.val(e)}b=$("#"+b).serialize();$.ajax({type:"POST",url:"login",data:b,dataType:"json",complete:function(a,c){(a=a.responseJSON)?a.login?($("[name\x3d'loginedBtn']").toggle(!0),$("[name\x3d'loginBtn']").toggle(!1),Custombox.modal.close()):(a=a.message,$("#messageTip").text(a)):$("#messageTip").text("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u3002");$("#vi").trigger("click");$("#vc").val("")}})}
function followToggle(b,d){var e=d.id;$.ajax({type:"POST",url:b,data:d,dataType:"json",beforeSend:function(a){a=$("span[name\x3d'fw-"+e+"']");if(a.attr("disabled"))return $.bootstrapGrowl("\u8bf7\u7b49\u5f85\uff0c\u4e0d\u8981\u91cd\u590d\u70b9\u51fb\u3002",{type:"info",align:"center",delay:5E3}),!1;a.attr("disabled",!0);return!0},complete:function(a,c){c=$("span[name\x3d'fw-"+e+"']");if(a=a.responseJSON){var b=a.isFollowed,f=a.follows;a.commit?(b?(c.find("i[class\x3d'fa fa-star']").toggle(!0),c.find("i[class\x3d'far fa-star']").toggle(!1)):
(c.find("i[class\x3d'fa fa-star']").toggle(!1),c.find("i[class\x3d'far fa-star']").toggle(!0)),c.find("span[name\x3d'follows']").text(f+" "),d.tip&&$.bootstrapGrowl(b?"\u5df2\u5173\u6ce8/\u6536\u85cf\u3002":"\u5df2\u53d6\u6d88\u5173\u6ce8/\u6536\u85cf\u3002",{type:"info",align:"center",delay:3E3})):(a=a.message,$.bootstrapGrowl(a?a:"\u5931\u8d25\u7a0d\u540e\u8bf7\u91cd\u8bd5\u3002",{type:"info",align:"center",delay:3E3}))}else $.bootstrapGrowl("\u5931\u8d25\u7a0d\u540e\u8bf7\u91cd\u8bd5\u3002",{type:"info",
align:"center",delay:5E3});c.attr("disabled",!1)}})}
function voteToggle(b,d){var e=d.answerId;$.ajax({type:"POST",url:b,data:d,dataType:"json",complete:function(a,c){c=$("#like-"+e);var b=$("#dislike-"+e);if(a=a.responseJSON){var d=a.vote,g=a.likes,h=a.dislikes;a.commit?(1==d?(c.find("i[name\x3d'thumbs-up']").toggle(!0),c.find("i[name\x3d'thumbs-up-o']").toggle(!1),b.find("i[name\x3d'thumbs-down']").toggle(!1),b.find("i[name\x3d'thumbs-down-o']").toggle(!0)):-1==d?(c.find("i[name\x3d'thumbs-up']").toggle(!1),c.find("i[name\x3d'thumbs-up-o']").toggle(!0),
b.find("i[name\x3d'thumbs-down']").toggle(!0),b.find("i[name\x3d'thumbs-down-o']").toggle(!1)):0==d&&(c.find("i[name\x3d'thumbs-up']").toggle(!1),c.find("i[name\x3d'thumbs-up-o']").toggle(!0),b.find("i[name\x3d'thumbs-down']").toggle(!1),b.find("i[name\x3d'thumbs-down-o']").toggle(!0)),c.find("span[name\x3d'likes']").text(g+" "),b.find("span[name\x3d'dislikes']").text(h+" ")):(c=a.message,$.bootstrapGrowl(c?c:"\u5931\u8d25\u7a0d\u540e\u8bf7\u91cd\u8bd5\u3002",{type:"info",align:"center",delay:3E3}))}else $.bootstrapGrowl("\u5931\u8d25\u7a0d\u540e\u8bf7\u91cd\u8bd5\u3002",
{type:"info",align:"center",delay:5E3})}})}function toggleBox(b,d){$("#allBox_"+b).toggle();$("#partBox_"+b).toggle();$("#hideBtn_"+b).toggle();(b=$("#"+d))&&$("html,body").finish().animate({scrollTop:b.offset().top-100},400)};